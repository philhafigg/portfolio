<?xml version="1.0"?>
<project name="brainVisual vein" default="main" basedir="/Sites/">	
	
	<!-- library paths -->
	<property name="lib.dir" 			value="/usr/local/Cellar/yuicompressor/2.4.8/libexec" />	
	<property name="yui-compressor" 	location="${lib.dir}/yuicompressor-2.4.8.jar" />
	
	<!-- project source and destination file paths -->
	<property name="lib.js.dir" 		value="${basedir}/common/lib" />
	<property name="source.js.dir" 		value="${basedir}/_vein/dev" />
	<property name="build.js.dir"		value="${basedir}/_vein" />
	
	<!-- targets -->
	<target name="main" depends="concatJS, compressJS" />	
    
	<target name="concatJS">    
    	<concat destfile="${build.js.dir}/brain.vein.3.0.js" force="true" fixlastline="true" encoding="UTF-8" outputencoding="UTF-8">
    	
			<filelist dir="${lib.js.dir}"						files="jquery.2.1.4.js" />
			<filelist dir="${source.js.dir}/namespace"			files="namespace.js" />
			<filelist dir="${source.js.dir}/controller"			files="controller.framework.js, controller.js" />
			<filelist dir="${source.js.dir}/data"				files="data.js, data.factory.js" />
			<filelist dir="${source.js.dir}/debug"				files="debug.js" />
			<filelist dir="${source.js.dir}/events"				files="events.js" />
			<filelist dir="${source.js.dir}/formatting"			files="formatting.js" />
			<filelist dir="${source.js.dir}/init"				files="init.js" />
			<filelist dir="${source.js.dir}/language"			files="language.js" />
			<filelist dir="${source.js.dir}/loader"				files="loader.items.js, loader.js, loader.language.js, loader.scripts.js, loader.configs.js, loader.configs.frame.js" />
			<filelist dir="${source.js.dir}/model"				files="model.js" />
			<filelist dir="${source.js.dir}/observer"			files="observer.clicks.js, observer.live.js, observer.navigation.js, observer.site.js, observer.stylefills.js" />
			<filelist dir="${source.js.dir}/params"				files="params.js, params.loader.js" />
			<filelist dir="${source.js.dir}/progress"			files="progress.js" />
			<filelist dir="${source.js.dir}/setup"				files="setup.init.js, setup.params.js, setup.css.js, setup.device.js, setup.items.js, setup.languages.js, setup.scripts.js, setup.scripts.client.js, setup.configs.js, setup.scripts.packages.js" />
			<filelist dir="${source.js.dir}/url"				files="url.js" />
			<filelist dir="${source.js.dir}/utils"				files="utils.js" />
			<filelist dir="${source.js.dir}/view"				files="view.js" />
		</concat>
	</target>
	
	<target name="compressJS">
		<apply executable="java" parallel="true">
	        <filelist dir="${build.js.dir}" files="brain.vein.3.0.js" />
	        <arg line="-jar" />
	        <arg path="${yui-compressor}" />
	        <srcfile />
	        <arg line="-o" />
	        <mapper type="glob" from="*.js" to="${build.js.dir}/*.min.js" />
	        <targetfile />
	    </apply>
	</target>
</project>